<!DOCTYPE html>
<html><head><meta name="GCD" content="YTk3ODQ3ZWZhN2I4NzZmMzBkNTEwYjJl9e95f61016dee4f757a68e9e35aef5fa"/>
  <meta charset="utf-8">
  <title>Index</title>
  <meta name="generator" content="Google Web Designer 5.0.3.0130">
  <style type="text/css" id="gwd-text-style">p {
    margin: 0px;
}
h1 {
    margin: 0px;
}
h2 {
    margin: 0px;
}
h3 {
    margin: 0px;
}</style>
  <style type="text/css">html,
body {
    width: 100%;
    height: 100%;
    margin: 0px;
}
body {
    background-color: transparent;
    transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    -moz-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    perspective: 1400px;
    -webkit-perspective: 1400px;
    -moz-perspective: 1400px;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
}
.gwd-p-1do4 {
    height: auto;
    left: 0px;
    position: relative;
    top: 0px;
    width: auto;
    background-image: none;
    background-color: transparent;
}
.gwd-p-izlo {
    height: auto;
    left: 0px;
    position: relative;
    top: 0px;
    width: auto;
}
.gwd-button-39lq {
    color: red;
    float: right;
    width: 80px;
    height: 40px;
    left: 20px;
}
.gwd-button-11u5 {
    width: 80px;
    left: 0px;
    height: 30px;
    top: 20px;
}
.gwd-button-k5iy {
    width: 80px;
    height: 30px;
    left: -3px;
    top: 20px;
}
.gwd-button-cx08 {
    width: 80px;
    left: 0px;
    height: 30px;
    top: 6px;
}
.gwd-button-it82 {
    width: 80px;
    height: 30px;
    top: 5px;
    left: 0px;
}
.gwd-div-1w7a {
    position: absolute;
    top: 0%;
    left: 0%;
    width: 100%;
    height: 40%;
}
.menu {
    margin: auto;
    width: 320px;
    top: 0%;
    height: 30px;
}
.gwd-div-2qgl {
    position: relative;
    overflow: auto;
    left: 0%;
    width: 100%;
    height: 95%;
    top: 5%;
}
.about {
    text-align: left;
    position: relative;
    margin: auto;
    width: 1000px;
}</style>
  <script type="text/javascript" gwd-events="support" src="gwd-events-support.1.0.js"></script>
  <script type="text/javascript" gwd-events="handlers">
    window.gwd = window.gwd || {};
    gwd.about = function(event) {
      var x = document.getElementById("canvas");
      x.style.display = "none";
      x = document.getElementById("canvas_H");
      x.style.display = "none";
      x = document.getElementById("about");
      x.style.display = "block";
    };
    gwd.current = function(event) {
      // current data
      var x = document.getElementById("canvas");
      x.style.display = "block";
      x = document.getElementById("canvas_H");
      x.style.display = "none";
      x = document.getElementById("about");
      x.style.display = "none";
    };
    gwd.history = function(event) {
      // show history
      var x = document.getElementById("canvas_H");
      x.style.display = "block";
      x = document.getElementById("canvas");
      x.style.display = "none";
      x = document.getElementById("about");
      x.style.display = "none";
    };
  </script>
  <script type="text/javascript" gwd-events="registration">
    // Support code for event handling in Google Web Designer
     // This script block is auto-generated. Please do not edit!
    gwd.actions.events.registerEventHandlers = function(event) {
      gwd.actions.events.addHandler('Btn_4', 'click', gwd.about, false);
      gwd.actions.events.addHandler('Btn_1', 'click', gwd.current, false);
      gwd.actions.events.addHandler('Btn_2', 'click', gwd.history, false);
    };
    gwd.actions.events.deregisterEventHandlers = function(event) {
      gwd.actions.events.removeHandler('Btn_4', 'click', gwd.about, false);
      gwd.actions.events.removeHandler('Btn_1', 'click', gwd.current, false);
      gwd.actions.events.removeHandler('Btn_2', 'click', gwd.history, false);
    };
    document.addEventListener("DOMContentLoaded", gwd.actions.events.registerEventHandlers);
    document.addEventListener("unload", gwd.actions.events.deregisterEventHandlers);
  </script>
</head>

<body class="htmlNoPages">
  <script type="text/javascript">
    window.onload = function() {
      var t_col = "#F07C60"
      var h_col = "#8CC8E8"
      var r_col = "#A3CDA8"
      var p_col = "#BDBBB3"
      var w_col = "#AD9CF3"
      var ti_col = "#FFFFFF"
      var PI = 3.1416;
      var rad = 57.2958;
      var c = document.getElementById("canvas");
      var ch = document.getElementById("canvas_H");
      var dia = 80;

      function draw_dial(loc, win) {
        var x1, y1;
        var ident;
        var scale = 5,
          start = -20;
        switch (loc) {
          case 0:
            x1 = 166;
            y1 = 133;
            ident = 13;
            scale = 5;
            start = -20;
            break;
          case 1:
            x1 = 832;
            y1 = 133;
            ident = 13;
            scale = 5;
            start = -20;
            break;
          case 2:
            x1 = 166;
            y1 = 400;
            ident = 11;
            scale = 10;
            start = 0;
            break;
          case 3:
            x1 = 832;
            y1 = 400;
            ident = 11;
            scale = 10;
            start = 0;
            break;
          case 4:
            x1 = 500;
            y1 = 133;
            ident = 11;
            scale = 20;
            start = 860;
            break;
          case 5:
            x1 = 166;
            y1 = 666;
            ident = 11;
            scale = 5;
            start = 0;
            break;
        }
        var step = 240 / (ident - 1);
        var offset = dia * 0.707;
        win.beginPath();
        win.arc(x1, y1, dia, 0.75 * PI, 0.25 * PI);
        win.stroke();
        win.beginPath();
        win.moveTo(x1 - offset, y1 + offset);
        win.lineTo(x1 + offset, y1 + offset);
        win.stroke();
        var val;
        for (var i = 0; i < ident; i++) {
          var x2, y2, x3, y3;
          var ang = (-30 + (step * i)) / rad;
          y2 = y1 - ((dia + 2) * Math.sin(ang));
          y3 = y1 - ((dia + 10) * Math.sin(ang));
          x2 = x1 - ((dia + 2) * Math.cos(ang));
          x3 = x1 - ((dia + 10) * Math.cos(ang));
          win.beginPath();
          win.moveTo(x2, y2);
          win.lineTo(x3, y3);
          win.stroke();
          val = (i * scale) + start;
          y2 = y1 + 5 - ((dia + 25) * Math.sin(ang));
          x2 = x1 - 10 - ((dia + 25) * Math.cos(ang));

          win.font = "14px Arial";
          win.fillText(val.toString(), x2, y2);

        }
      }

      function draw_bearing(x, y, win) {
        var ident = 8;
        var direction = ["N", "NE", "E", "SE", "S", "SW", "W", "NW"];
        win.beginPath();
        win.arc(x, y, dia, 0, 2 * PI);
        win.stroke();
        win.beginPath();

        var step = 360 / ident;
        for (var i = 0; i < ident; i++) {
          var x2, y2, x3, y3;
          var ang = (90 + (step * i)) / rad;
          y2 = y - ((dia + 2) * Math.sin(ang));
          y3 = y - ((dia + 10) * Math.sin(ang));
          x2 = ((dia + 2) * Math.cos(ang)) + x;
          x3 = ((dia + 10) * Math.cos(ang)) + x;
          win.beginPath();
          win.moveTo(x2, y2);
          win.lineTo(x3, y3);
          win.stroke();

          val = (i * 30);
          y2 = y + 5 - ((dia + 25) * Math.sin(ang));
          x2 = x - 5 - ((dia + 25) * Math.cos(ang));

          win.font = "14px Arial";
          win.fillText(direction[i], x2, y2);
        }
      }

      function data_plot(x, y, win) {
        var delta;
        var x1, y1;
        switch (x) {
          case 0:
            delta = (1.1667 - (((20 + y) / 90) * 2)) * PI;
            x1 = 166;
            y1 = 133;
            break;
          case 1:
            delta = (1.1667 - (((20 + y) / 90) * 2)) * PI;
            x1 = 832;
            y1 = 133;
            break;
          case 2:
            delta = (1.1667 - ((y / 150) * 2)) * PI;
            x1 = 166;
            y1 = 400;
            break;
          case 3:
            delta = (1.1667 - ((y / 150) * 2)) * PI;
            x1 = 832;
            y1 = 400;
            break;
          case 4:
            delta = (1.1667 - (((y - 860) / 300) * 2)) * PI;
            x1 = 500;
            y1 = 133;
            break;
          case 5:
            delta = (1.1667 - ((y / 75) * 2)) * PI;
            x1 = 166;
            y1 = 666;
            break;
          case 6:
            delta = (0.5 - ((y / 360) * 2)) * PI;
            x1 = 832;
            y1 = 666;
            break;
        }
        var x2, y2, x3, y3, x4, y4;
        y2 = y1 - ((dia - 15) * Math.sin(delta + 0.05));
        y3 = y1 - ((dia - 5) * Math.sin(delta));
        y4 = y1 - ((dia - 15) * Math.sin(delta - 0.05));
        x2 = ((dia - 15) * Math.cos(delta + 0.05)) + x1;
        x3 = ((dia - 5) * Math.cos(delta)) + x1;
        x4 = ((dia - 15) * Math.cos(delta - 0.05)) + x1;

        win.beginPath();
        win.moveTo(x1, y1);
        win.lineTo(x2, y2);
        win.lineTo(x3, y3);
        win.lineTo(x4, y4);
        win.lineTo(x1, y1);
        win.fill();
      }

      function update_fields() {
        var x = document.getElementById("canvas");
        x.style.display = "block";
        x = document.getElementById("canvas_H");
        x.style.display = "none";
        x = document.getElementById("about");
        x.style.display = "none";
        var ctx = c.getContext("2d");
        ctx.fillStyle = t_col;
        ctx.fillRect(0, 0, 333, 267);
        ctx.fillRect(666, 0, 333, 267);
        ctx.fillStyle = h_col;
        ctx.fillRect(0, 267, 333, 266);
        ctx.fillRect(666, 267, 333, 267);
        ctx.fillStyle = p_col;
        ctx.fillRect(333, 0, 333, 267);
        ctx.fillStyle = r_col;
        ctx.fillRect(333, 267, 333, 266);
        ctx.fillStyle = w_col;
        ctx.fillRect(0, 533, 333, 267);
        ctx.fillRect(666, 533, 333, 267);
        ctx.fillStyle = ti_col;
        ctx.fillRect(333, 533, 333, 267);
        draw_dial(0, ctx);
        draw_dial(1, ctx);
        draw_dial(2, ctx);
        draw_dial(3, ctx);
        draw_dial(4, ctx);
        draw_dial(5, ctx);
        draw_bearing(832, 666, ctx);
        var xhr = new XMLHttpRequest();
        var a = '0';
        var url = "https://script.google.com/macros/s/AKfycbzep_6TONHLbfjt1H23_iCb0DMc126LPo3smsun/exec?read=current";
        xhr.onreadystatechange = function() {
          if (xhr.readyState == 4) {
            var t_r = xhr.responseText;
            var dat = t_r.split(",");
            ctx.fillStyle = "Yellow";
            data_plot(0, parseFloat(dat[0]), ctx);
            data_plot(1, parseFloat(dat[18]), ctx);
            ctx.fillStyle = "Green";
            data_plot(2, parseFloat(dat[3]), ctx);
            data_plot(3, parseFloat(dat[21]), ctx);
            data_plot(4, parseFloat(dat[24]), ctx);
            data_plot(5, parseFloat("10"), ctx);
            data_plot(6, parseFloat("90"), ctx);

          }
        };
        xhr.open("GET", url, false);
        xhr.send(null);
      };
      //  var myVar = setInterval( update_fields, 10000);
      update_fields();
    }
  </script>
  <div class="gwd-div-1w7a gwd-gen-19kmgwdanimation">
    <div class="menu gwd-gen-1ep5gwdanimation">
      <button class="gwd-button-39lq gwd-button-it82 gwd-gen-it1egwdanimation" id="Btn_4">About</button>
      <button class="gwd-button-39lq gwd-button-cx08 gwd-gen-9blwgwdanimation" id="Btn_3"></button>
      <button class="gwd-button-39lq gwd-button-k5iy gwd-gen-5uiygwdanimation" id="Btn_2">History</button>
      <button class="gwd-button-39lq gwd-button-11u5 gwd-gen-1ju9gwdanimation" id="Btn_1">Current</button>
    </div>
  </div>
  <div class="gwd-div-2qgl" id="Data">
    <div class="about">
      <canvas id="canvas" height="800" width="1000"></canvas>
      <canvas id="canvas_H" height="800" width="1000"></canvas>
      <div>
        <div class="about" id="about">
          <h3>Weather Station Operation</h3>
          <h4>Temperature </h4>
          <p>Sensor AM2320</p>
          <h4>Humidity </h4>
          <p>Sensor AM2320</p>
          <p></p>
          <h4>Air Pressure</h4>
          <p>Sensor BMP180</p>
          <p></p>
          <h4>Rain Fall</h4>
          <p>Count number of drips from calibrated Tube</p>
          <p></p>
          <h4>Wind Speed and Direction</h4>
          <p>Utrasonic Sensors @ N, S, E &amp; W</p>
          <p>Pulse Sensors N-S, S-N</p>
          <p>Measure Time of Flight each way to calculte N-S vector</p>
          <p>Pulse Sensors E-W, W-E</p>
          <p>Measure Time of Flight each way to calculte E-W vector</p>
          <p>Calculate Speed of Sound using Temperature and Humidity</p>
          <p>From above calculate Wind Speed and Bearing using Trig</p>
        </div>
      </div>
    </div>
  </div>


</body></html>
